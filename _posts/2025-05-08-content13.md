---
layout: single
title: ".dmp íŒŒì¼ ìƒì„± ë° ë””ë²„ê¹… ë°©ë²•"
date: 2025-05-08
permalink: /issues/content13/
categories: [issues]
tags: ["ë””ë²„ê¹…",".dmp","CrashDump","MiniDumpWriteDump","ì˜ˆì™¸ì²˜ë¦¬","C++"]
sidebar:
  nav: "issues"
classes: wide
---

## ğŸ˜¢**ìƒí™©**
* í”„ë¡œê·¸ë¨ì´ ì˜ˆê¸°ì¹˜ ì•Šê²Œ ì¢…ë£Œë  ë•Œ, **ìë™ìœ¼ë¡œ ë©”ëª¨ë¦¬ ë¤í”„(.dmp) íŒŒì¼ì„ ìƒì„±**í•˜ì—¬  
  ë‚˜ì¤‘ì— ë¬¸ì œë¥¼ ë¶„ì„í•˜ê³  ì‹¶ìŒ  
* ìˆ˜ë™ ë¤í”„ ìƒì„±ì´ ì•„ë‹Œ, ì½”ë“œë¡œ ë¤í”„ë¥¼ ë‚¨ê¸°ê³  ì‹¶ìŒ

***

## ğŸ› ï¸**í•´ê²°ë²•**

### 1. ë¤í”„ íŒŒì¼ ìƒì„± ì½”ë“œ ì¶”ê°€

C++ ì½”ë“œì—ì„œ `MiniDumpWriteDump`ë¥¼ í˜¸ì¶œí•˜ì—¬ `.dmp` íŒŒì¼ ìƒì„±:

```cpp
#include <windows.h>
#include <DbgHelp.h>
#include <filesystem>
#include <regex>
#include <sstream>

namespace fs = std::filesystem;

// ë¤í”„ ìƒì„± í•¨ìˆ˜
void CreateMiniDump(EXCEPTION_POINTERS* pep)
{
    HANDLE hFile = CreateFile(_T(".\crash\CrashDump.dmp"), GENERIC_WRITE, 0, NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);
    if (hFile != INVALID_HANDLE_VALUE)
    {
        MINIDUMP_EXCEPTION_INFORMATION mdei;
        mdei.ThreadId = GetCurrentThreadId();
        mdei.ExceptionPointers = pep;
        mdei.ClientPointers = FALSE;

        MiniDumpWriteDump(GetCurrentProcess(), GetCurrentProcessId(), hFile, MiniDumpNormal, &mdei, NULL, NULL);
        CloseHandle(hFile);
    }
}

// ì²˜ë¦¬ë˜ì§€ ì•Šì€ ì˜ˆì™¸ í•¸ë“¤ëŸ¬
LONG WINAPI MyUnhandledExceptionFilter(EXCEPTION_POINTERS* pExceptionInfo)
{
    CreateMiniDump(pExceptionInfo);
    MessageBoxA(hWnd, msg.str().c_str(), "ì˜ˆìƒì¹˜ ëª»í•œ ì¢…ë£Œ", MB_OK | MB_TOPMOST | MB_ICONERROR);
    return EXCEPTION_EXECUTE_HANDLER;
}
```

ğŸ’¡ í”„ë¡œê·¸ë¨ ì§„ì… ì‹œ `SetUnhandledExceptionFilter(MyUnhandledExceptionFilter);`ë¥¼ ë“±ë¡í•´ì•¼ ì‘ë™í•©ë‹ˆë‹¤.

---

### 2. .dmp íŒŒì¼ ë¶„ì„ ë°©ë²• (ìš”ì•½)

ìƒì„±ëœ `.dmp` íŒŒì¼ì€ Visual Studio ë˜ëŠ” WinDbgë¡œ ì—´ì–´ ë¶„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
(ìì„¸í•œ ë¶„ì„ ë°©ë²•ì€ [.dmp íŒŒì¼ì„ ì´ìš©í•œ ë””ë²„ê¹… ë°©ë²•](/issues/content12/) ë¬¸ì„œë¥¼ ì°¸ê³ )

***

## âœ…**ì •ë¦¬: ì™œ ì´ê²Œ íš¨ê³¼ ìˆì—ˆëŠ”ê°€?**

* í”„ë¡œê·¸ë¨ì´ í¬ë˜ì‹œí•  ë•Œ ìˆ˜ë™ ê°œì… ì—†ì´ **ìë™ìœ¼ë¡œ ë¤í”„ì™€ ë¡œê·¸ë¥¼ ë‚¨ê¸¸ ìˆ˜ ìˆìŒ**
* ë¤í”„ íŒŒì¼ì€ **ë¬¸ì œ ì¬í˜„ì´ ì–´ë ¤ìš´ í¬ë˜ì‹œ ë¶„ì„ì— í•„ìˆ˜ì ì¸ ìë£Œ**ê°€ ë¨
* `MiniDumpWriteDump` í•¨ìˆ˜ëŠ” Windows ê¸°ë³¸ APIë¡œ, ì¶”ê°€ ì„¤ì¹˜ ì—†ì´ ì‚¬ìš© ê°€ëŠ¥
